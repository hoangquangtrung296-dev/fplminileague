<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantasy Premier League - Mini League Tracker (LOCAL)</title>
    <link rel="stylesheet" href="style.css">
    <script>
        // Force local mode by setting global variable BEFORE loading app.js
        window.FORCE_LOCAL_MODE = true;
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üèÜ FPL Mini League Tracker</h1>
            <p class="subtitle">Theo d√µi v√† t√≠nh to√°n s·ªë ti·ªÅn ƒë√≥ng g√≥p</p>
        </header>

        <div id="userInfo" class="user-info hidden">
            <div class="user-display">
                <span id="currentEntryId"></span>
                <div class="user-actions">
                    <button id="showLeagues" class="btn btn-secondary" title="Quay l·∫°i danh s√°ch League">üìã Danh s√°ch League</button>
                    <button id="changeUser" class="btn btn-secondary">üîÑ ƒê·ªïi User</button>
                </div>
            </div>
        </div>

        <div class="controls" id="entryInputSection">
            <div class="input-group">
                <label for="entryId">User ID (Entry ID):</label>
                <div>
                    <input type="text" id="entryId" placeholder="Nh·∫≠p Entry ID c·ªßa b·∫°n (s·ªë trong URL team c·ªßa b·∫°n)" value="232782">
                    <button id="loadUser" class="btn btn-primary">T·∫£i danh s√°ch League</button>
                </div>
            </div>
        </div>

        <div id="leagueSelector" class="league-selector hidden">
            <h3>Ch·ªçn League</h3>
            <div id="leagueList" class="league-list">
                <!-- Will be populated by JavaScript -->
            </div>
        </div>

        <!-- Classic League Info -->
        <div id="classicLeagueInfo" class="league-info hidden">
            <div class="league-header">
                <div class="league-header-main">
                    <h2 id="leagueName"></h2>
                    <div class="gw-info-inline">
                        <span class="gw-range-label">üìÖ</span>
                        <span id="gwRangeInfo" class="gw-range-value">GW1 - GW38</span>
                        <span id="remainingGWs" class="gw-remaining">(ƒêang t·∫£i...)</span>
                    </div>
                </div>
                <div class="league-actions">
                    <select id="gameweekSelect" class="gameweek-select-compact">
                        <option value="">-- Ch·ªçn tu·∫ßn --</option>
                    </select>
                    <a href="settings.html?mode=local" class="btn btn-settings" title="C√†i ƒë·∫∑t s·ªë ti·ªÅn">‚öôÔ∏è</a>
                </div>
            </div>
        </div>

        <!-- H2H League Info -->
        <div id="h2hLeagueInfo" class="league-info hidden">
            <!-- Will be populated by JavaScript -->
        </div>

        <div id="loading" class="loading hidden">
            <div class="spinner"></div>
            <p id="loadingText">ƒêang t·∫£i d·ªØ li·ªáu...</p>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <p id="progressText" class="progress-text"></p>
        </div>

        <div id="error" class="error hidden"></div>

        <div id="standings" class="standings hidden">
            <h3>B·∫£ng x·∫øp h·∫°ng Gameweek <span id="currentGW"></span></h3>
            <div class="table-container">
                <table id="standingsTable">
                    <thead>
                        <tr>
                            <th data-sort="rankByTotal">H·∫°ng <span class="sort-icon"></span></th>
                            <th data-sort="playerName">Ng∆∞·ªùi ch∆°i <span class="sort-icon"></span></th>
                            <th data-sort="gwPoints">ƒêi·ªÉm GW <span class="sort-icon"></span></th>
                            <th data-sort="totalPoints">T·ªïng ƒëi·ªÉm <span class="sort-icon"></span></th>
                            <th data-sort="payment">S·ªë ti·ªÅn GW <span class="sort-icon"></span></th>
                            <th data-sort="cumulativePayment">T·ªïng ti·ªÅn ƒë√£ ƒë√≥ng <span class="sort-icon"></span></th>
                        </tr>
                    </thead>
                    <tbody id="standingsBody">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- H2H League Section (Separate from Classic) -->
        <div id="h2hStandings" class="standings hidden">
            <div id="h2hMatchesContainer">
                <!-- H2H matches will be inserted here -->
            </div>
            <h3>B·∫£ng x·∫øp h·∫°ng H2H</h3>
            <div class="table-container">
                <table id="h2hStandingsTable">
                    <thead>
                        <tr>
                            <th style="width: 60px; color: white;">H·∫°ng</th>
                            <th style="color: white;">Ng∆∞·ªùi ch∆°i</th>
                            <th style="text-align: center; width: 80px; color: white;">Tr·∫≠n</th>
                            <th style="text-align: center; width: 70px; color: white;">Th·∫Øng</th>
                            <th style="text-align: center; width: 70px; color: white;">H√≤a</th>
                            <th style="text-align: center; width: 70px; color: white;">Thua</th>
                            <th style="text-align: center; width: 90px; color: white;">ƒêi·ªÉm cho</th>
                            <th style="text-align: center; width: 100px; color: white;">ƒêi·ªÉm ch·ªëng</th>
                            <th style="text-align: center; width: 90px; color: white;">T·ªïng ƒëi·ªÉm</th>
                        </tr>
                    </thead>
                    <tbody id="h2hStandingsBody">
                    </tbody>
                </table>
            </div>
        </div>

        <div id="leagueSettings" class="league-settings-info hidden">
            <div class="settings-info-grid">
                <div class="settings-info-card highlight">
                    <div class="settings-info-label">üèÜ Gi·∫£i Th∆∞·ªüng</div>
                    <div class="awards-list" id="awardsList">
                        <!-- Will be populated by JS -->
                    </div>
                </div>
            </div>
        </div>

        <div id="summary" class="summary hidden">
            <h3>üìä T·ªïng h·ª£p t√≠ch l≈©y</h3>
            <div class="summary-stats">
                <div class="stat-card">
                    <div class="stat-label">T·ªïng qu·ªπ gameweek</div>
                    <div class="stat-value" id="totalGWFund">0ƒë</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">T·ªïng qu·ªπ c·∫£ gi·∫£i</div>
                    <div class="stat-value" id="totalLeagueFund">0ƒë</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">S·ªë ng∆∞·ªùi ch∆°i</div>
                    <div class="stat-value" id="totalPlayers">0</div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
